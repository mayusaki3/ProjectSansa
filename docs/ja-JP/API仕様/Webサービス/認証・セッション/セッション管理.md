[目次](../../../目次.md) > API仕様 > [Webサービス](../../Webサービス・目次.md) > 認証・セッション > セッション管理
# セッション管理（logout_all / RT再利用検知）

## 目的
分散構成で即時失効と再利用検知を保証。

## 方式
- ユーザーに `token_version (tv)` を保持。JWTに `tv` クレームを含め、毎リクエストでDBの `tv` と照合。
- `POST /auth/logout_all` で `tv++`。以後、旧 `tv` のトークンは 401。

## エンドポイント
- `POST /auth/logout`（現セッションのみ）
- `POST /auth/logout_all`（全端末一斉）
- `GET /sessions` / `DELETE /sessions/{sessionId}`

## RT 再利用検知
- リフレッシュは1回限り。旧RTの再使用検知で **トークンファミリ全失効**（`tv++`）、通知・監査。

## 参照
- [ログイン](./ログイン.md)
- [監査](../../../マニュアル/運用向け/監査.md)

---
[目次](../../../目次.md) > API仕様 > [Webサービス](../../Webサービス・目次.md) > 認証・セッション > セッション管理
