[目次](../目次.md) > データ定義 ユーザー情報

## はじめに
この手順では SansaXR クラスタのユーザー情報を作成します。

## ユーザー情報を作成します。
1. cqlsh を起動します。
   ```shell
   cqlsh
   ```
1. キースペースとテーブルを作成します。
   ```sql
   -- キースペースを作成
   CREATE KEYSPACE IF NOT EXISTS UserManage WITH replication = {
      'class': 'SimpleStrategy',
      'replication_factor': 3  // クラスタのサイズに応じて調整
   };

   -- このセッション内で使用するキースペースを設定
   USE UserManage;

   -- ユーザー認証情報を作成
   CREATE TABLE IF NOT EXISTS users (
      user_id uuid PRIMARY KEY,         -- ユーザーID
      username text,                    -- ユーザー名
      email text,                       -- メールアドレス
      hashed_password text,             -- ハッシュ化されたパスワード
      additional_auth map<text, text>,  -- 追加の認証
      created_at timestamp,             -- 作成日時
      updated_at timestamp              -- 最終更新日時
   ) WITH comment = 'ユーザー認証情報テーブル';

   -- ユーザープロファイル情報を作成
   CREATE TABLE IF NOT EXISTS user_profiles (
      user_id uuid PRIMARY KEY,         -- ユーザーID
      first_name text,                  -- 姓
      last_name text,                   -- 名 
      display_name text,                -- 表示名
      birth_date date,                  -- 誕生日
      display_language text,            -- 表示言語
      additional_info map<text, text>,  -- 追加の情報
      created_at timestamp,             -- 作成日時
      updated_at timestamp              -- 最終更新日時
   ) WITH comment = 'ユーザープロファイル情報テーブル';

   CREATE INDEX ON users (username);
   CREATE INDEX ON users (email);

   exit
   ```
## ユーザー情報の設定を確認します。
1. cqlsh を起動します。
   ```shell
   cqlsh
   ```
1. 各ノードでキースペースとテーブルを確認します。
   ```sql
   -- キースペースを確認
   DESCRIBE KEYSPACES;

   -- テーブルを確認
   USE UserManage;
   DESCRIBE TABLES;

   -- テーブルの定義を確認
   DESCRIBE TABLE users;
   DESCRIBE TABLE user_profiles;

   exit
   ```
## キースペースのレプリケーション設定を変更するには
1. cqlsh を起動します。
   ```shell
   cqlsh
   ```
1. キースペースのレプリケーション設定を変更します。
   ```sql
   ALTER KEYSPACE UserManage WITH REPLICATION = {
      'class': 'SimpleStrategy',
      'replication_factor' : 新しいファクター値
   };
   ```


***
[目次](../目次.md) > データ定義 ユーザー情報
