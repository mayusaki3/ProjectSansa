[目次](../../../目次.md) > 結合テスト > Webサービス> [認証・セッション 結合テスト 目次](目次.md) > 06. MFA（TOTP・メール切替）
# 06. MFA（TOTP・メール切替）

**観点**: MFA（TOTP / メール一時切替）

### テストケース
- **[IT-06-001] TOTP 初期化→有効化→ログイン時要求**  
  **Expect**: 初回はシークレット/QR 取得 → 検証成功で `MFA_ENABLED`。以後ログインで TOTP 必須

- **[IT-06-002] メール認証への一時切替（TOTP 不能時）**  
  **Step**: `/auth/mfa/switch` で `method=email`  
  **Expect**: `200`、次回ログインでメールコードを要求

- **[IT-06-003] 最終ログインからの経過時間で MFA 要求**  
  **Pre**: `mfa.requireAfter=24h`  
  **Expect**: 24h 未満不要 / 以上は必須

---
[目次](../../../目次.md) > 結合テスト > Webサービス> [認証・セッション 結合テスト 目次](目次.md) > 06. MFA（TOTP・メール切替）