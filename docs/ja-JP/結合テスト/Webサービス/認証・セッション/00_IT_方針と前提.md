[目次](../../../目次.md) > 結合テスト > Webサービス > [認証・セッション 結合テスト 目次](目次.md) > 結合テスト方針と前提

# 結合テスト方針と前提

## 目的
- 01〜09 の結合観点で、認証・WebAuthn・MFA・セッション・トークン・監査・レート制限・i18n を横断的に検証する。
- 単体テストの網羅を前提に、**コンポーネント間の接続点（Controller⇄Service⇄Repo、外部メール/時刻/鍵束）**を重点確認。

## 前提/共通
- ベースURL: `${BASE_URL}`
- 認証ヘッダ: `Authorization: Bearer <accessToken>`
- 言語: 入力 `Accept-Language` / 出力 `Content-Language`
- エラーフォーマット: `application/problem+json`
- テストデータ:
  - 許可ドメイン: `example.com`
  - ブロックドメイン: `blocked.test`（ disposable/deny リスト）
  - 既存ユーザー: なし（テスト内で作成/破棄）

## 命名規約
- テストID: `IT-<章番号>-<通し3桁>`（例: `IT-01-001`）
- 章番号:
  - 01: 登録フロー（pre-register / verify-email / register）
  - 02: WebAuthn（登録・認証・管理）
  - 03: ログイン（パスワード / WebAuthn / MFA誘導）
  - 04: セッション（現在/列挙/個別失効）
  - 05: ログアウト（単体 / 全端末=logout_all）
  - 06: トークン（TTL/リフレッシュ/改竄/tv）
  - 07: MFA（TOTP / Email OTP / Recovery）
  - 08: 監査・レート制限
  - 09: i18n / problem+json / セキュリティヘッダ

## 記述形式
- 各ケースは **Given / When / Then** で記述し、**期待ステータス・主要レスポンスキー**を明示。

---
[目次](../../../目次.md) > 結合テスト > Webサービス > [認証・セッション 結合テスト 目次](目次.md) > 結合テスト方針と前提
